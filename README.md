# ioBrokerTelegramMenuScript

Telegram bot with inline menu, based on https://blog.instalator.ru/archives/1996 by Vladimir Vilisov aka instalator.
- There is Russian language Readme.md.
- English one will come later.

## –û—Ç–ª–∏—á–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
–ú–Ω–µ –±—ã–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞, –∫–∞–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏, —Ç–∞–∫ –∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –Ω–∞ –±–∞–∑–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ [ioBroker](https://www.iobroker.net/), –¥–µ–ª–∞—Ç—å –∏—Ö —Ä–∞–∑–Ω–µ—Å–µ–Ω–∏–µ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º, –Ω–∞ –±–∞–∑–µ [–ö–∞—Ç–µ–≥–æ—Ä–∏–π](https://www.iobroker.net/#en/documentation/admin/enums.md). ![](docs/images/enums_ru.png) 

## –ù–∞—Å—Ç—Ä–æ–µ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```
var options = {
    telegram:   'telegram.0',           // –ò–Ω—Å—Ç–∞–Ω—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞
    backText:   'üîô –ù–∞–∑–∞–¥',             // –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ –ù–∞–∑–∞–¥
    backCmd:    'back-',                 //–ü—Ä–µ—Ñ–∏–∫—Å –∫–æ–º–∞–Ω–¥—ã –∫–Ω–æ–ø–∫–∏ –ù–∞–∑–∞–¥
    closeText:  '‚ùå –ó–∞–∫—Ä—ã—Ç—å',           // –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ –ó–∞–∫—Ä—ã—Ç—å
    closeCmd:   'close',                //–ö–æ–º–∞–Ω–¥–∞ –∫–Ω–æ–ø–∫–∏ –ó–∞–∫—Ä—ã—Ç—å
    homeText:   'üèö –ì–ª–∞–≤–Ω–∞—è',           // –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ –î–æ–º–æ–π
    homeCmd:    'home',                  //–ö–æ–º–∞–Ω–¥–∞ –∫–Ω–æ–ø–∫–∏ –î–æ–º–æ–π
    width:      3,                      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏
    users_id:   [123456789,234567891],            // id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –º–µ–Ω—é
    menucall:   ['–ú–µ–Ω—é', '–º–µ–Ω—é', '/menu'],      // –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –º–µ–Ω—é
    menuPrefix: 'menu-',                // –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, –º–æ–∂–Ω–æ –Ω–µ –º–µ–Ω—è—Ç—å
    showHome:   true,                   // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –î–æ–º–æ–π
    showMsg:    true,                   // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–ø–ª—ã–≤–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    language:   "ru",                   // –Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è
    locale:     "ru-RU",                // –Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è    
    debug:      false                    // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏, –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
};
```
–í —Ü–µ–ª–æ–º –æ–Ω–∏ –≤–∑—è—Ç—ã –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞, –∏ –Ω–∞ –º–æ–π –≤–∑–≥–ª—è–¥ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—è—Å–Ω–µ–Ω–∏—è. –ò, –≤ –æ–±—â–µ–º-—Ç–æ - –∏–∑–º–µ–Ω–µ–Ω–∏—è.
–ù–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é –¥–≤–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∞–∂–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
* users_id - —ç—Ç–æ –º–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ–ª–µ–≥—Ä–∞–º–º, –∫—Ç–æ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ—Ç–æ–º. –£–∑–Ω–∞—Ç—å —Å–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –¥—Ä—É–≥–∏—Ö –±–æ—Ç–æ–≤, –∫ –ø—Ä–∏–º–µ—Ä—É - @myidbot.
* menucall - –º–∞—Å—Å–∏–≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ –µ–≥–æ –º–µ–Ω—é. 

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ–≥–æ –ø—Ä–∏–º–µ—Ä –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å–∫—Ä–∏–ø—Ç–∞:
```
const menu = {
    name: '–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é',
    icon: '‚öôÔ∏è',
    submenu: [
        { // –î–≤–µ—Ä–∏
            name: '–î–≤–µ—Ä–∏',
            icon: 'üö™',
            type: 'door',
            submenu: submenuGenerator
        },
        { // –û—Å–≤–µ—â–µ–Ω–∏–µ
            name: '–û—Å–≤–µ—â–µ–Ω–∏–µ',
            icon: 'üí°',
            submenu: [
                {
                    name: '–ü—Ä–∏—Ö–æ–∂–∞—è',
                    state: 'linkeddevices.0.switches.lonsonho.light.lobby.state',
                    icons: {on: 'üí°', off: '‚úñÔ∏è'},
                    submenu: []
                },
            ]
        },
        { // –†–æ–∑–µ—Ç–∫–∏
            name: '–†–æ–∑–µ—Ç–∫–∏',
            icon: 'üîå',
            type: 'plug',
            submenu: submenuGenerator
        },         
        { // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
            icon: '‚ÑπÔ∏è',
            submenu: [
                {
                    name: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞',
                    function: Environments,
                    param: 'temperature',
                    icon: 'üå°',
                    submenu: []
                },
                {
                    name: '–í–ª–∞–∂–Ω–æ—Å—Ç—å',
                    function: Environments,
                    param: 'humidity', // –ê –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–æ—Ç —Ç–∞–∫
                    icon: 'üí¶',
                    submenu: []
                }
            ]
        },
    ]
};
}    
```
### –≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é
–ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π JavaScript –æ–±—ä–µ–∫—Ç.
#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞ - —ç–ª–µ–º–µ–Ω—Ç–∞ –º–µ–Ω—é:
##### name
–¢–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è —Ç–æ, —á—Ç–æ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ –∫–Ω–æ–ø–∫–µ –º–µ–Ω—é, –∏–ª–∏ –≤ –µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–µ.
##### submenu
–ú–∞—Å—Å–∏–≤ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤–∞.
–¢–∞–∫ –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, —Ç–æ –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ ```[]```.
–í —Å–∫—Ä–∏–ø—Ç–µ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é - ```submenuGenerator```.
##### icon –∏–ª–∏ icons
–¢–∞–∫ –∂–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, —Ç–æ—á–Ω–µ–µ, –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
- –ï—Å–ª–∏ –≤—ã –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω —ç–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ ```icon```, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —ç–º–æ–¥–∑–∏, –∏—Å–∫–∞—Ç—å —É–¥–æ–±–Ω–æ, –∫ –ø—Ä–∏–º–µ—Ä—É, [–∑–¥–µ—Å—å](https://www.emojicopy.com/) –∏–ª–∏ [–∑–¥–µ—Å—å](https://emojipedia.org/).
- –ï—Å–ª–∏ –∂–µ –µ—Å—Ç—å –∂–µ–ª–∞–Ω–∏–µ –º–µ–Ω—è—Ç—å –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ - —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ ```icons```. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (boolean). –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–µ ```true``` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ ```on```, –î–ª—è ```false``` - ```off```. 
#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞ - —ç–ª–µ–º–µ–Ω—Ç–∞ –º–µ–Ω—é:
##### state
–ö–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, —Ö–æ—Ç—è –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –µ—Å—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π, –ª–∏–±–æ –≤–∞–º —Ç–∞–∫ —É–¥–æ–±–Ω–µ–µ. 
–ï—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:
- –≠—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ (boolean) –∑–Ω–∞—á–µ–Ω–∏—è.
–ï–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –∏–∫–æ–Ω–∫–∏ –∫–Ω–æ–ø–∫–∏ (—Å–º. –≤—ã—à–µ). –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ. –¢–æ—á–Ω–µ–µ - —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.
–ü–æ–ª—É—á–∏—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ioBroker, —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞: ![](docs/images/full_id_get_how_ru.png), –Ω–∞–∂–∞–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É, –∏ –ø–æ—Ç–æ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–≤ —Å—Ç—Ä–æ–∫—É c –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º: ![](docs/images/full_id_get_ru.png).
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä JavaScript —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–∞–ø–∏—à–∏—Ç–µ —Å–∞–º–∏. –í –∫–∞—á–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∏—Ç –æ–±—ä–µ–∫—Ç - –ø—É–Ω–∫—Ç –º–µ–Ω—é.
–≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é –º–æ–≥—É—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ ```state```, –Ω–æ —Ç–æ–≥–¥–∞ –æ–Ω–∏ –æ–±—è–∑–∞–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
##### param
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –≤ —Å–≤–æ–π—Å—Ç–≤–µ ```state``` —Ñ—É–Ω–∫—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –≤–∞—à–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ. –ù–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º.
##### type
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ ```submenu``` —Ñ—É–Ω–∫—Ü–∏—è ```submenuGenerator```. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –º–µ–Ω—é.
–ß—Ç–æ –Ω–µ –º–µ–Ω–µ–µ –≤–∞–∂–Ω–æ - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –æ–¥–Ω–æ–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ä–∞–∑–¥–µ–ª–µ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ioBroker. ![](docs/images/enum_functions_ru.png)![](docs/images/type_functions_ru.png)
#### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
–Ø–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º. –ù–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞. –û—Å—Ç–∞–ª—å–Ω—ã–µ - –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é
–ö–ª—é—á–µ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é —Å –ø–æ–º–æ—â—å—é "–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π" —Ñ—É–Ω–∫—Ü–∏–∏ ```submenuGenerator```, —è–≤–ª—è—é—Ç—Å—è:
- ~–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–π—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –º–∞—Å–∫–µ~;
- –æ–±—ä–µ–∫—Ç–∞–º, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ–Ω—é, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã –∫–æ–º–Ω–∞—Ç–∞ –∏ —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ë–µ–∑ —ç—Ç–æ–≥–æ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã.
![](docs/images/type_functions_and_rooms_ru.png)
–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –≤—Ö–æ–¥–∏—Ç –±–æ–ª–µ–µ —á–µ–º –≤ –æ–¥–Ω—É –∫–æ–º–Ω–∞—Ç—É - –≤ –º–µ–Ω—é –æ–Ω –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö. –ï—Å–ª–∏ —É –æ–±—ä–µ–∫—Ç–∞ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π —Ä–æ–ª–∏ - –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –µ—Å—Ç—å —Å–≤–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ –º–µ–Ω—é - –æ–Ω –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤ –∫–∞–∂–¥–æ–º —Ç–∞–∫–æ–º –º–µ–Ω—é.
```
const submenuParams = { 
    'plug' : 
        {
            mask : 'linkeddevices.0.sockets.*.plug.*.state',
            role : 'switch',
            state : 'state',
            rooms : false,
            icons : {on: '‚úÖ', off: '‚ùå'},
            menuitems : 
                {
                    '.state' : '–í–∫–ª/–≤—ã–∫–ª', 
                    '.auto_off' : '–ê–≤—Ç–æ–≤—ã–∫–ª—é—á–µ–Ω–∏–µ', 
                    '.led_disabled_night' : '–í—ã–∫–ª. –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä', 
                    '.power_outage_memory' : '–ó–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ'
                },
            report: reportGenerator,
            reportitems :
                {
                    '.consumer_connected'   : '–ù–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞', 
                    '.consumer_overloaded'  : '–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞', 
                    '.current'              : '–¢–æ–∫ –Ω–∞–≥—Ä—É–∑–∫–∏', 
                    '.voltage'              : '–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∏', 
                    '.temperature'          : '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–Ω—É—Ç—Ä–∏', 
                    '.load_power'           : '–¢–µ–∫—É—â–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ',
                    '.consumption'          : '–í—Å–µ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–æ', 
                    '.link_quality'         : '–£—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞'
                },
            statusitems :
                {
                }
        },
    'door' :
        {
            mask : 'linkeddevices.0.sensors.*.magnet.*.opened',
            role : 'state',
            state: 'opened',
            icons : {on: 'üîì', off: 'üîê'},
            report: reportGenerator,
            menuitems : 
                {
                },
            reportitems :
                {
                    
                },
            statusitems :
                {
                    'lc' : '–ù–µ –º–µ–Ω—è–ª—Å—è —Å',
                    'ack' : '–ü–æ—Ç–¥–≤–µ—Ä–∂–¥–µ–Ω',
                    'ts' : '–ü–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞',
                    'val' : {
                        'prefix' : '–°—Ç–∞—Ç—É—Å',
                        true : '–û—Ç–∫—Ä—ã—Ç–∞',
                        false : '–ó–∞–∫—Ä—ã—Ç–∞'
                    }
                }                
        },
};
```
–ò —Å–Ω–æ–≤–∞ –æ–±—ä–µ–∫—Ç JavaScript. –ù–∞ –ø–µ—Ä–≤–æ–º —É—Ä–æ–≤–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ - —Å–≤–æ–π—Å—Ç–≤–æ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ (—Å–≤–æ–π—Å—Ç–≤–æ type —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–µ–Ω—é).
–ö–∞–∂–¥—ã–π –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–∏–ø –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤.
### –°–≤–æ–π—Å—Ç–≤–∞ —Ç–∏–ø–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –º–µ–Ω—é.
#### mask
~–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ - –º–∞—Å–∫–∞ –ø–æ–∏—Å–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ioBroker, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Ç–æ–π, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ [—Å–µ–ª–µ–∫—Ç–æ—Ä–µ –æ–±—ä–µ–∫—Ç–æ–≤](https://github.com/ioBroker/ioBroker.javascript/blob/master/docs/en/javascript.md#---selector).~ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
#### role
–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Ä–æ–ª—å –æ–±—ä–µ–∫—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ioBroker. ![](docs/images/role_ru.png)
#### state
–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ "–∫—Ä–∞—Ç–∫–∏–π" –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –µ–≥–æ –∂–µ –≤—ã –≤–∏–¥–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ioBroker. ![](docs/images/state_short_ru.png)
#### icons
–°–≤–æ–π—Å—Ç–≤–æ, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É —Ç–æ–º—É, —á—Ç–æ –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –º–µ–Ω—é. –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é, –∞ —Ç–∞–∫ –∂–µ –≤ –æ—Ç—á–µ—Ç–∞—Ö.
#### menuitems
–ï—Å–ª–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º, –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Å –Ω–∏–º –≤ ioBroker –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã, –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã, —Ç–æ –º–æ–∂–Ω–æ –∏—Ö –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤ –≤–∏–¥–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é. –ö –ø—Ä–∏–º–µ—Ä—É, –µ—Å–ª–∏ —É —Ä–æ–∑–µ—Ç–∫–∏ –µ—Å—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å, –Ω–æ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä - –∑–∞–ø–æ–º–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–æ —ç—Ç–æ –∏ –±—É–¥–µ—Ç —Ç–∞–∫–∏–º –æ–±—ä–µ–∫—Ç–æ–º –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏. ![](docs/images/state_and_other_ru.png)
–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤—Å–µ, –≤–∫–ª—é—á–∞—è –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∑–¥–µ—Å—å, –≤ —Ñ–æ—Ä–º–∞—Ç–µ ```'.–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä_–æ–±—ä–µ–∫—Ç–∞': '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏'```.
#### report
–ó–∞–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞, –µ—Å–ª–∏ —É –æ–±—ä–µ–∫—Ç–∞ –µ—Å—Ç—å –µ—â–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫—Ä–æ–º–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ ```state``` –∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤ ```menuitems```, –Ω–æ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –≤–∏–¥–µ—Ç—å, –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —ç–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é. –ù–∞–ø—Ä–∏–º–µ—Ä - –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è" —Ñ—É–Ω–∫—Ü–∏—è '''reportGenerator''', —Ç–æ –µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∫–∞–∑–∞–Ω—ã –≤ '''reportitems'''
#### reportitems
–°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ –º–µ–Ω—è—é—â–∏—Ö —Å—Ç–∞—Ç—É—Å, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–ª–µ–∫—Å–æ–º –æ–±—ä–µ–∫—Ç–µ, –∫ –ø—Ä–∏–º–µ—Ä—É - –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ. –§–æ—Ä–º–∞—Ç –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω ```menuitems```.![](docs/images/state_and_report_ru.png)
#### statusitems
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ–Ω—é, –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –∫ –ø—Ä–∏–º–µ—Ä—É - –¥–∞—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–≤–µ—Ä–∏. –¢–æ–≥–¥–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞. –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω ```ls, ack, ts. val```. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ ```val```, –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
## –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
![](docs/images/result_ru.gif)
